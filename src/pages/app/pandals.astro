---
import { GoogleMaps } from '@/components/app/map/GoogleMap';
import { MdOutlineFestival } from 'react-icons/md';
import Layout from '@/layouts/WebAppLayout.astro';
import { cn } from '@/libs/utils';
import AppHeader from '@/components/app/shared/AppHeader.astro';
import SearchBar from '@/components/app/shared/Search/SearchBar.astro';
import { PANDAL_MARKER_ICON } from '@/constants/location';
import { PANDALS } from '@/constants/pandals';

const API_KEY = import.meta.env.GOOGLE_MAPS_API_KEY as string;
const pandals = PANDALS.map((pandal, index) => ({
  id: index + 1,
  name: pandal.name,
  lat: pandal.lat,
  lng: pandal.lon,
}));
---

<Layout title="Pandals | Pujo Atlas">
  <main
    class={cn(
      'flex-1 flex flex-col gap-3 lg:gap-6 gap-y-3 lg:gap-y-2',
      'bg-secondary-background p-3 lg:p-4 lg:py-12 lg:px-20',
      'lg:rounded-l-xl lg:shadow-l-xl overflow-y-auto scroll-smooth',
    )}
  >
    <AppHeader />
    <SearchBar />

    <div
      class="flex flex-col justify-center px-2 py-2 bg-[#e6dfcf] rounded-[22px] drop-shadow-lg shadow-black"
    >
      <span class="flex flex-row items-center justify-start py-1">
        &nbsp;<MdOutlineFestival size="20" className="mb-1" />&nbsp;<span
          class="font-sans font-normal text-base mb-0.5">Pandal map</span
        ></span
      >
      <GoogleMaps
        apiKey={API_KEY}
        locations={pandals}
        icon={PANDAL_MARKER_ICON}
        client:load
        client:only="react"
      />
    </div>
  </main>
</Layout>
